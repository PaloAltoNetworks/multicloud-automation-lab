{
	"AWSTemplateFormatVersion": "2010-09-09",
	"Description": "Multi-cloud deployment lab",
	"Mappings": {
		"RegionMap": {
			"ap-northeast-1": {
				"DB9AMD": "ami-0c4290d7ce45d7bbe"
			},
			"ap-northeast-2": {
				"DB9AMD": "ami-0fa1392d5d545f9e8"
			},
			"ap-south-1": {
				"DB9AMD": "ami-0b6490868957ce747"
			},
			"ap-southeast-1": {
				"DB9AMD": "ami-04c9740a9ed018dba"
			},
			"ap-southeast-2": {
				"DB9AMD": "ami-0b91189c4f9f5cd9e"
			},
			"ca-central-1": {
				"DB9AMD": "ami-0857efbad274a1a89"
			},
			"eu-central-1": {
				"DB9AMD": "ami-05449f21272b4ee56"
			},
			"eu-north-1": {
				"DB9AMD": "ami-043a919b6dc7c51cc"
			},
			"eu-west-1": {
				"DB9AMD": "ami-035c67e6a9ef8f024"
			},
			"eu-west-2": {
				"DB9AMD": "ami-0ef10a4062f24d89d"
			},
			"eu-west-3": {
				"DB9AMD": "ami-0cb185e7696ffe300"
			},
			"sa-east-1": {
				"DB9AMD": "ami-0bc0ce4ab8b82305c"
			},
			"us-east-1": {
				"DB9AMD": "ami-0f9e7e8867f55fd8e"
			},
			"us-east-2": {
				"DB9AMD": "ami-00c5940f2b52c5d98"
			},
			"us-west-1": {
				"DB9AMD": "ami-0afda78f1d0272d99"
			},
			"us-west-2": {
				"DB9AMD": "ami-01d07e14f082b3ba1"
			}
		}
	},
	"Resources": {
		"LpSecurityGroup": {
			"Type": "AWS::EC2::SecurityGroup",
			"Properties": {
				"GroupDescription": "Allow SSH in",
				"SecurityGroupIngress": [{
					"IpProtocol": "tcp",
					"FromPort": "22",
					"ToPort": "22",
					"CidrIp": "0.0.0.0/0"
				}]
			}
		},

		"Launchpad": {
			"Type": "AWS::EC2::Instance",
			"Properties": {
				"ImageId": {
					"Fn::FindInMap": ["RegionMap", {
						"Ref": "AWS::Region"
					}, "DB9AMD"]
				},
				"InstanceType": "t2.micro",
				"SecurityGroups": [{
					"Ref": "LpSecurityGroup"
				}],
				"UserData": "IyEvdXNyL2Jpbi9lbnYgYmFzaAoKIyBDb3B5cmlnaHQgMjAxOSBQYWxvIEFsdG8gTmV0d29ya3MuCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAojCiMgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQojIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiMgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiMgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAojIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoKIyBGb3IgdXNlIG9uIERlYmlhbiA5IChTdHJldGNoKSBzZXJ2ZXJzCgplY2hvICJTZXR0aW5nIHVwIHN0dWRlbnQgYWNjb3VudCAuLi4iCnVzZXJhZGQgLW0gLXMgL2Jpbi9iYXNoIHN0dWRlbnQKZWNobyAnc3R1ZGVudDpJZ25pdGUyMDE5JyB8IGNocGFzc3dkCnVzZXJtb2QgLWFHIHN1ZG8gc3R1ZGVudAoKZWNobyAiQ29uZmlndXJpbmcgU1NIIHNlcnZlciBmb3IgcGFzc3dvcmQgYXV0aGVudGljYXRpb24gLi4uIgptdiAvZXRjL3NzaC9zc2hkX2NvbmZpZyAvZXRjL3NzaC9zc2hkX2NvbmZpZy5vcmlnCmNhdCAvZXRjL3NzaC9zc2hkX2NvbmZpZy5vcmlnIHwgc2VkICdzL15QYXNzd29yZEF1dGhlbnRpY2F0aW9uIG5vL1Bhc3N3b3JkQXV0aGVudGljYXRpb24geWVzL2cnID4gL2V0Yy9zc2gvc3NoZF9jb25maWcKc2VydmljZSBzc2hkIHJlc3RhcnQKCmVjaG8gIkNyZWF0aW5nIC52aW1yYyAuLi4iCmNhdCA+IC9ob21lL3N0dWRlbnQvLnZpbXJjIDw8IEVPRgpzZXQgcnVsZXIKc2V0IHNob3dtb2RlCnNldCBzaG93bWF0Y2gKc2V0IHRhYnN0b3A9NApzZXQgc2hpZnR3aWR0aD00CnNldCBldApzZXQgbGFzdHN0YXR1cz0yCnNldCBwYXN0ZQpFT0YKCmVjaG8gIkluc3RhbGxpbmcgcmVxdWlyZWQgcGFja2FnZXMgLi4uIgphcHQgdXBkYXRlIC15IC1xCmFwdC1nZXQgaW5zdGFsbCB1bnppcCBnaXQganEgcHl0aG9uLXBpcCAteSAtcQoKZWNobyAiSW5zdGFsbGluZyBBbnNpYmxlIC4uLiIKcGlwIC1xIGluc3RhbGwgcGFuLXB5dGhvbiBwYW5kZXZpY2UgeG1sdG9kaWN0IGFuc2libGUKL3Vzci9sb2NhbC9iaW4vYW5zaWJsZS1nYWxheHkgaW5zdGFsbCBQYWxvQWx0b05ldHdvcmtzLnBhbG9hbHRvbmV0d29ya3MKbXYgL3Jvb3QvLmFuc2libGUgL2hvbWUvc3R1ZGVudAoKZWNobyAiSW5zdGFsbGluZyBUZXJyYWZvcm0gLi4uIgp0ZXJyYWZvcm1fdXJsPSQoY3VybCBodHRwczovL3JlbGVhc2VzLmhhc2hpY29ycC5jb20vaW5kZXguanNvbiB8IGpxICd7dGVycmFmb3JtfScgfCBlZ3JlcCAibGludXguKmFtZDY0IiB8IHNvcnQgLS12ZXJzaW9uLXNvcnQgLXIgfCBncmVwIC1FdiAnYWxwaGF8YmV0YScgfCBoZWFkIC0xIHwgYXdrIC1GW1wiXSAne3ByaW50ICQ0fScpCmNkIC90bXAKY3VybCAtbyB0ZXJyYWZvcm0uemlwICR0ZXJyYWZvcm1fdXJsCnVuemlwIHRlcnJhZm9ybS56aXAKbXYgdGVycmFmb3JtIC91c3IvbG9jYWwvYmluLwpybSAtZiB0ZXJyYWZvcm0uemlwCgplY2hvICJGaXhpbmcgYWxsIHBlcm1pc3Npb25zIC4uLiIKY2hvd24gLVIgc3R1ZGVudDpzdHVkZW50IC9ob21lL3N0dWRlbnQKCmVjaG8gIkRvbmUgd2l0aCB1c2VyIGRhdGEgaW5pdCEiCg=="
			}
		}
	},

	"Outputs": {
		"Launchpad IP": {
			"Value": {
				"Fn::GetAtt": ["Launchpad", "PublicIp"]
			},
			"Description": "IP address of the launchpad host"
		}
	}
}